{"ast":null,"code":"import { ref } from \"vue\";\nimport axios from '../api/request';\nimport { useRouter } from 'vue-router';\nimport { message } from \"ant-design-vue\";\nimport RiskLevel from \"@/components/User/RiskLevel.vue\";\n\n//控制跳转路径\n\nexport default {\n  __name: 'AddUser',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const router = useRouter();\n    const nextDisabled = ref(true);\n    const riskLevel = ref(0);\n    const current = ref(0);\n    const next = () => {\n      current.value++;\n    };\n    const prev = () => {\n      current.value--;\n    };\n    const subtitle = ref('');\n    const customer = ref({\n      address: \"\",\n      email: \"\",\n      id: \"\",\n      name: \"\",\n      phone: \"\",\n      risk_level: riskLevel,\n      type: \"\"\n    });\n    const steps = [{\n      title: \"用户风险评级\"\n      //   content: \"First-content\",\n    }, {\n      title: \"个人信息填写\"\n      //   content: \"Second-content\",\n    }, {\n      title: \"开户结果\"\n      //   content: \"Last-content\",\n    }];\n    let result = 'false';\n\n    //成功跳转\n    function Ok() {\n      // router.push({ path: '/menu/adduser' })\n      current.value = 0;\n    }\n\n    //提交风险评级问卷\n    function rating() {\n      console.log('评级');\n    }\n\n    //提交按钮\n    function adduser() {\n      axios.put('/customer', customer.value).then(response => {\n        console.log(response.data);\n        if (response.data.success) {\n          result = 'true';\n        }\n        subtitle.value = response.data.message;\n        next();\n      }).catch(error => {\n        console.error(error);\n      });\n    }\n    const __returned__ = {\n      router,\n      nextDisabled,\n      riskLevel,\n      current,\n      next,\n      prev,\n      subtitle,\n      customer,\n      steps,\n      get result() {\n        return result;\n      },\n      set result(v) {\n        result = v;\n      },\n      Ok,\n      rating,\n      adduser,\n      ref,\n      get axios() {\n        return axios;\n      },\n      get useRouter() {\n        return useRouter;\n      },\n      get message() {\n        return message;\n      },\n      RiskLevel\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","axios","useRouter","message","RiskLevel","router","nextDisabled","riskLevel","current","next","value","prev","subtitle","customer","address","email","id","name","phone","risk_level","type","steps","title","result","Ok","rating","console","log","adduser","put","then","response","data","success","catch","error"],"sources":["H:/GitHub-Repository/hengsheng/hello-world/src/components/AddUser.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <a-space direction=\"vertical\" :size=\"30\" style=\"width: 90%\">\r\n      <a-steps :current=\"current\">\r\n        <a-step v-for=\"item in steps\" :key=\"item.title\" :title=\"item.title\" />\r\n      </a-steps>\r\n\r\n      <div class=\"steps-content\">\r\n        <div v-if=\"current === 0\">\r\n          <risk-level\r\n            @finish=\"\r\n              (r) => {\r\n                nextDisabled = false;\r\n                riskLevel = r;\r\n              }\r\n            \"\r\n          />\r\n        </div>\r\n        <div v-if=\"current === 1\">\r\n          <a-row>\r\n            <a-col :span=\"1\"></a-col>\r\n            <a-col :span=\"6\">\r\n              <label for=\"160\">姓名</label>\r\n              <a-input v-model:value=\"customer.name\" size=\"large\" id=\"160\" />\r\n            </a-col>\r\n            <a-col :span=\"1\"></a-col>\r\n            <a-col :span=\"6\">\r\n              <label for=\"161\">证件号</label>\r\n              <a-input v-model:value=\"customer.id\" size=\"large\" id=\"161\" />\r\n            </a-col>\r\n            <a-col :span=\"1\"></a-col>\r\n            <a-col :span=\"6\">\r\n              <label for=\"162\">邮箱</label>\r\n              <a-input\r\n                type=\"email\"\r\n                v-model:value=\"customer.email\"\r\n                id=\"162\"\r\n                size=\"large\"\r\n              />\r\n            </a-col>\r\n          </a-row>\r\n          <br />\r\n          <br />\r\n\r\n          <a-row>\r\n            <a-col :span=\"1\"></a-col>\r\n            <a-col :span=\"6\">\r\n              <label for=\"163\">联系方式</label>\r\n              <a-input v-model:value=\"customer.phone\" size=\"large\" id=\"163\" />\r\n            </a-col>\r\n            <a-col :span=\"1\"></a-col>\r\n            <a-col :span=\"6\">\r\n              <label for=\"164\">住址</label>\r\n              <a-input v-model:value=\"customer.address\" size=\"large\" id=\"164\" />\r\n            </a-col>\r\n            <a-col :span=\"1\"></a-col>\r\n            <a-col :span=\"6\">\r\n              <!-- <a-input v-model:value=\"customer.type\" placeholder=\"类型\" /> -->\r\n              <label for=\"type\">用户类型：</label>\r\n              <a-select\r\n                ref=\"select\"\r\n                id=\"type\"\r\n                size=\"large\"\r\n                v-model:value=\"customer.type\"\r\n                style=\"width: 250px\"\r\n              >\r\n                <a-select-option :value=\"Number('0')\">个人客户</a-select-option>\r\n                <a-select-option :value=\"Number('1')\">公司客户</a-select-option>\r\n              </a-select>\r\n            </a-col>\r\n          </a-row>\r\n        </div>\r\n\r\n        <div v-if=\"current === 2\">\r\n          <a-result\r\n            status=\"success\"\r\n            title=\"开户成功\"\r\n            :sub-title=\"subtitle\"\r\n            v-if=\"result === 'true'\"\r\n          >\r\n            <template #extra>\r\n              <a-button key=\"确认\" type=\"primary\" @click=\"Ok\">确认</a-button>\r\n            </template>\r\n          </a-result>\r\n          <a-result\r\n            status=\"error\"\r\n            :sub-title=\"subtitle\"\r\n            title=\"开户失败\"\r\n            v-if=\"result === 'false'\"\r\n          >\r\n            <template #extra>\r\n              <a-button key=\"确认\" type=\"primary\" @click=\"Ok\">确认</a-button>\r\n            </template>\r\n          </a-result>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"steps-action\">\r\n        <a-space>\r\n          <a-button\r\n            v-if=\"current < steps.length - 2\"\r\n            type=\"primary\"\r\n            @click=\"next\"\r\n            :disabled=\"nextDisabled\"\r\n            >下一步</a-button\r\n          >\r\n          <a-button\r\n            v-if=\"current == steps.length - 2\"\r\n            type=\"primary\"\r\n            @click=\"adduser\"\r\n          >\r\n            提交\r\n          </a-button>\r\n          <a-button v-if=\"current === 1\" style=\"margin-left: 8px\" @click=\"prev\"\r\n            >上一步\r\n          </a-button>\r\n        </a-space>\r\n      </div>\r\n    </a-space>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"js\">\r\nimport {ref} from \"vue\";\r\nimport axios from '../api/request'\r\nimport {useRouter} from 'vue-router';\r\nimport {message} from \"ant-design-vue\";\r\nimport RiskLevel from \"@/components/User/RiskLevel.vue\";\r\n\r\n//控制跳转路径\r\nconst router = useRouter();\r\n\r\nconst nextDisabled = ref(true);\r\nconst riskLevel = ref(0);\r\n\r\nconst current = ref(0);\r\nconst next = () => {\r\n  current.value++;\r\n};\r\nconst prev = () => {\r\n  current.value--;\r\n};\r\n\r\nconst subtitle = ref('')\r\nconst customer = ref({\r\n  address: \"\",\r\n  email: \"\",\r\n  id: \"\",\r\n  name: \"\",\r\n  phone: \"\",\r\n  risk_level: riskLevel,\r\n  type: \"\",\r\n})\r\n\r\nconst steps = [\r\n  {\r\n    title: \"用户风险评级\",\r\n    //   content: \"First-content\",\r\n  },\r\n  {\r\n    title: \"个人信息填写\",\r\n    //   content: \"Second-content\",\r\n  },\r\n  {\r\n    title: \"开户结果\",\r\n    //   content: \"Last-content\",\r\n  },\r\n]\r\n\r\nlet result = 'false';\r\n\r\n//成功跳转\r\nfunction Ok() {\r\n  // router.push({ path: '/menu/adduser' })\r\n  current.value = 0;\r\n\r\n}\r\n\r\n//提交风险评级问卷\r\nfunction rating() {\r\n\r\n  console.log('评级')\r\n}\r\n\r\n//提交按钮\r\nfunction adduser() {\r\n  axios.put('/customer', customer.value)\r\n      .then(response => {\r\n        console.log(response.data);\r\n        if (response.data.success) {\r\n          result = 'true';\r\n        }\r\n\r\n        subtitle.value = response.data.message;\r\n        next();\r\n\r\n      })\r\n      .catch(error => {\r\n        console.error(error);\r\n      });\r\n\r\n\r\n}\r\n</script>\r\n\r\n<!-- <script>\r\nimport { defineComponent, ref } from \"vue\";\r\nimport { message } from \"ant-design-vue\";\r\nexport default defineComponent({\r\n  setup() {\r\n    const current = ref(0);\r\n    const next = () => {\r\n      current.value++;\r\n    };\r\n    const prev = () => {\r\n      current.value--;\r\n    };\r\n    return {\r\n      message,\r\n      customer: {\r\n        address: \"\",\r\n        email: \"\",\r\n        id: \"\",\r\n        name: \"\",\r\n        phone: \"\",\r\n        risk_level: \"\",\r\n        type: \"\",\r\n      },\r\n      current,\r\n      steps: [\r\n        {\r\n          title: \"用户风险评级\",\r\n          //   content: \"First-content\",\r\n        },\r\n        {\r\n          title: \"个人信息填写\",\r\n          //   content: \"Second-content\",\r\n        },\r\n        {\r\n          title: \"开户结果\",\r\n          //   content: \"Last-content\",\r\n        },\r\n      ],\r\n      next,\r\n      prev,\r\n    };\r\n  },\r\n});\r\n</script> -->\r\n\r\n<style scoped>\r\n.steps-action {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  /* background-color: black; */\r\n}\r\n.container {\r\n  margin: 50px;\r\n}\r\n</style>\r\n"],"mappings":"AA2HA,SAAQA,GAAG,QAAO,KAAK;AACvB,OAAOC,KAAK,MAAM,gBAAgB;AAClC,SAAQC,SAAS,QAAO,YAAY;AACpC,SAAQC,OAAO,QAAO,gBAAgB;AACtC,OAAOC,SAAS,MAAM,iCAAiC;;AAEvD;;;;;;;;IACA,MAAMC,MAAM,GAAGH,SAAS,CAAC,CAAC;IAE1B,MAAMI,YAAY,GAAGN,GAAG,CAAC,IAAI,CAAC;IAC9B,MAAMO,SAAS,GAAGP,GAAG,CAAC,CAAC,CAAC;IAExB,MAAMQ,OAAO,GAAGR,GAAG,CAAC,CAAC,CAAC;IACtB,MAAMS,IAAI,GAAGA,CAAA,KAAM;MACjBD,OAAO,CAACE,KAAK,EAAE;IACjB,CAAC;IACD,MAAMC,IAAI,GAAGA,CAAA,KAAM;MACjBH,OAAO,CAACE,KAAK,EAAE;IACjB,CAAC;IAED,MAAME,QAAQ,GAAGZ,GAAG,CAAC,EAAE,CAAC;IACxB,MAAMa,QAAQ,GAAGb,GAAG,CAAC;MACnBc,OAAO,EAAE,EAAE;MACXC,KAAK,EAAE,EAAE;MACTC,EAAE,EAAE,EAAE;MACNC,IAAI,EAAE,EAAE;MACRC,KAAK,EAAE,EAAE;MACTC,UAAU,EAAEZ,SAAS;MACrBa,IAAI,EAAE;IACR,CAAC,CAAC;IAEF,MAAMC,KAAK,GAAG,CACZ;MACEC,KAAK,EAAE;MACP;IACF,CAAC,EACD;MACEA,KAAK,EAAE;MACP;IACF,CAAC,EACD;MACEA,KAAK,EAAE;MACP;IACF,CAAC,CACF;IAED,IAAIC,MAAM,GAAG,OAAO;;IAEpB;IACA,SAASC,EAAEA,CAAA,EAAG;MACZ;MACAhB,OAAO,CAACE,KAAK,GAAG,CAAC;IAEnB;;IAEA;IACA,SAASe,MAAMA,CAAA,EAAG;MAEhBC,OAAO,CAACC,GAAG,CAAC,IAAI,CAAC;IACnB;;IAEA;IACA,SAASC,OAAOA,CAAA,EAAG;MACjB3B,KAAK,CAAC4B,GAAG,CAAC,WAAW,EAAEhB,QAAQ,CAACH,KAAK,CAAC,CACjCoB,IAAI,CAACC,QAAQ,IAAI;QAChBL,OAAO,CAACC,GAAG,CAACI,QAAQ,CAACC,IAAI,CAAC;QAC1B,IAAID,QAAQ,CAACC,IAAI,CAACC,OAAO,EAAE;UACzBV,MAAM,GAAG,MAAM;QACjB;QAEAX,QAAQ,CAACF,KAAK,GAAGqB,QAAQ,CAACC,IAAI,CAAC7B,OAAO;QACtCM,IAAI,CAAC,CAAC;MAER,CAAC,CAAC,CACDyB,KAAK,CAACC,KAAK,IAAI;QACdT,OAAO,CAACS,KAAK,CAACA,KAAK,CAAC;MACtB,CAAC,CAAC;IAGR"},"metadata":{},"sourceType":"module","externalDependencies":[]}