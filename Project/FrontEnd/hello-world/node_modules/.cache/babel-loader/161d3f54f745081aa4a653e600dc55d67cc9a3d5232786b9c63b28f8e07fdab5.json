{"ast":null,"code":"import { defineComponent } from 'vue';\nimport axios from \"@/api/request\";\nimport { message } from \"ant-design-vue\";\nimport { BigIntDecimal } from \"ant-design-vue/es/input-number/src/utils/MiniDecimal\";\nexport default defineComponent({\n  name: \"totalAssets\",\n  emits: [\"next\"],\n  data() {\n    return {\n      dataSource: [],\n      columns: [{\n        title: '基金代码',\n        dataIndex: 'fundId',\n        width: '30%'\n      }, {\n        title: '资产总值',\n        dataIndex: 'totalAssets',\n        width: '45%'\n      }, {\n        title: '操作',\n        dataIndex: 'operation'\n      }]\n    };\n  },\n  methods: {\n    randomOne(index) {\n      axios.get(\"http://118.25.19.55:9901/settlement/new_assets\", {\n        params: {\n          old: this.dataSource[index].totalAssets\n        }\n      }).then(r => {\n        console.log(r);\n        this.dataSource[index].totalAssets = new BigIntDecimal(r.data).toString();\n      }).catch(() => {\n        message.error(\"系统错误，请稍后再试\");\n      });\n    },\n    randomAll() {\n      axios.post(\"http://118.25.19.55:9901/settlement/new_assets\", this.dataSource.map(v => v.totalAssets)).then(r => {\n        console.log(r);\n        r.data.forEach((v, i) => {\n          this.dataSource[i].totalAssets = new BigIntDecimal(v).toString();\n        });\n      }).catch(() => {\n        message.error(\"系统错误，请稍后再试\");\n      });\n    }\n  },\n  mounted() {\n    axios.get(\"http://118.25.19.55:9901/settlement/old_assets\").then(r => {\n      console.log(r);\n      this.dataSource = r.data;\n    }).catch(() => {\n      message.error(\"系统错误，请稍后再试\");\n    });\n  }\n});","map":{"version":3,"names":["defineComponent","axios","message","BigIntDecimal","name","emits","data","dataSource","columns","title","dataIndex","width","methods","randomOne","index","get","params","old","totalAssets","then","r","console","log","toString","catch","error","randomAll","post","map","v","forEach","i","mounted"],"sources":["H:\\GitHub-Repository\\hengsheng\\hello-world\\src\\components\\Business\\Settlement\\totalAssets.vue"],"sourcesContent":["<script>\r\nimport {defineComponent} from 'vue'\r\nimport axios from \"@/api/request\";\r\nimport {message} from \"ant-design-vue\";\r\nimport {BigIntDecimal} from \"ant-design-vue/es/input-number/src/utils/MiniDecimal\";\r\n\r\nexport default defineComponent({\r\n  name: \"totalAssets\",\r\n  emits: [\"next\"],\r\n  data() {\r\n    return {\r\n      dataSource: [\r\n      ],\r\n      columns: [\r\n        {\r\n          title: '基金代码',\r\n          dataIndex: 'fundId',\r\n          width: '30%',\r\n        },\r\n        {\r\n          title: '资产总值',\r\n          dataIndex: 'totalAssets',\r\n          width: '45%',\r\n        },\r\n        {\r\n          title: '操作',\r\n          dataIndex: 'operation',\r\n        },\r\n      ]\r\n    }\r\n  },\r\n  methods: {\r\n    randomOne(index) {\r\n      axios.get(\"http://118.25.19.55:9901/settlement/new_assets\", {\r\n        params: {\r\n          old: this.dataSource[index].totalAssets\r\n        }\r\n      }).then(r => {\r\n        console.log(r)\r\n        this.dataSource[index].totalAssets = new BigIntDecimal(r.data).toString();\r\n      }).catch(() => {\r\n        message.error(\"系统错误，请稍后再试\")\r\n      })\r\n    },\r\n    randomAll() {\r\n      axios.post(\"http://118.25.19.55:9901/settlement/new_assets\", this.dataSource.map(v => v.totalAssets)).then(r => {\r\n        console.log(r)\r\n        r.data.forEach((v, i) => {\r\n          this.dataSource[i].totalAssets = new BigIntDecimal(v).toString()\r\n        })\r\n      }).catch(() => {\r\n        message.error(\"系统错误，请稍后再试\")\r\n      })\r\n    }\r\n  },\r\n  mounted() {\r\n    axios.get(\"http://118.25.19.55:9901/settlement/old_assets\").then(r => {\r\n      console.log(r)\r\n      this.dataSource = r.data;\r\n    }).catch(() => {\r\n      message.error(\"系统错误，请稍后再试\")\r\n    })\r\n  }\r\n})\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <h2>请根据上一交易日的盈亏情况填写以下基金投资组合的浮动资产总值</h2>\r\n    <span>表格中列出的是上一工作日的资产总值。</span>\r\n\r\n    <a-card title=\"特别工具\" style=\"width: 90%; margin-top: 30px\">\r\n      <div class=\"flex-container\">\r\n        <div class=\"item-a\"><h3>您可以点击这里批量为所有基金生成资产总值</h3></div>\r\n        <div class=\"item-b\">\r\n          <a-button type=\"link\" @click=\"randomAll\">批量生成</a-button>\r\n        </div>\r\n      </div>\r\n    </a-card>\r\n\r\n    <div class=\"tb-container\">\r\n      <a-table :columns=\"columns\" :data-source=\"dataSource\" rowKey=\"fundId\" bordered>\r\n        <template #bodyCell=\"{ column, text, index }\">\r\n          <template v-if=\"['fundId', 'totalAssets'].includes(column.dataIndex)\">\r\n            <div>\r\n              <a-input\r\n                  v-if=\"column.dataIndex === 'totalAssets'\"\r\n                  v-model:value=\"dataSource[index][column.dataIndex]\"\r\n                  style=\"margin: -5px 0\"\r\n              />\r\n              <template v-else>\r\n                {{ text }}\r\n              </template>\r\n            </div>\r\n          </template>\r\n          <template v-else-if=\"column.dataIndex === 'operation'\">\r\n            <div class=\"editable-row-operations\">\r\n              <a-button @click=\"randomOne(index)\">随机生成</a-button>\r\n            </div>\r\n          </template>\r\n        </template>\r\n      </a-table>\r\n    </div>\r\n  </div>\r\n\r\n  <a-button style=\"margin-top: 0\" type=\"primary\" @click=\"$emit('next', this.dataSource)\">下一步</a-button>\r\n\r\n</template>\r\n\r\n<style scoped>\r\n.tb-container {\r\n  width: 90%;\r\n  margin: 30px 0;\r\n}\r\n\r\n.flex-container {\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n\r\n.item-a {\r\n  text-align: left;\r\n}\r\n\r\n.item-b {\r\n  text-align: right;\r\n}\r\n</style>"],"mappings":"AACA,SAAQA,eAAe,QAAO,KAAI;AAClC,OAAOC,KAAI,MAAO,eAAe;AACjC,SAAQC,OAAO,QAAO,gBAAgB;AACtC,SAAQC,aAAa,QAAO,sDAAsD;AAElF,eAAeH,eAAe,CAAC;EAC7BI,IAAI,EAAE,aAAa;EACnBC,KAAK,EAAE,CAAC,MAAM,CAAC;EACfC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,UAAU,EAAE,EACX;MACDC,OAAO,EAAE,CACP;QACEC,KAAK,EAAE,MAAM;QACbC,SAAS,EAAE,QAAQ;QACnBC,KAAK,EAAE;MACT,CAAC,EACD;QACEF,KAAK,EAAE,MAAM;QACbC,SAAS,EAAE,aAAa;QACxBC,KAAK,EAAE;MACT,CAAC,EACD;QACEF,KAAK,EAAE,IAAI;QACXC,SAAS,EAAE;MACb,CAAC;IAEL;EACF,CAAC;EACDE,OAAO,EAAE;IACPC,SAASA,CAACC,KAAK,EAAE;MACfb,KAAK,CAACc,GAAG,CAAC,gDAAgD,EAAE;QAC1DC,MAAM,EAAE;UACNC,GAAG,EAAE,IAAI,CAACV,UAAU,CAACO,KAAK,CAAC,CAACI;QAC9B;MACF,CAAC,CAAC,CAACC,IAAI,CAACC,CAAA,IAAK;QACXC,OAAO,CAACC,GAAG,CAACF,CAAC;QACb,IAAI,CAACb,UAAU,CAACO,KAAK,CAAC,CAACI,WAAU,GAAI,IAAIf,aAAa,CAACiB,CAAC,CAACd,IAAI,CAAC,CAACiB,QAAQ,CAAC,CAAC;MAC3E,CAAC,CAAC,CAACC,KAAK,CAAC,MAAM;QACbtB,OAAO,CAACuB,KAAK,CAAC,YAAY;MAC5B,CAAC;IACH,CAAC;IACDC,SAASA,CAAA,EAAG;MACVzB,KAAK,CAAC0B,IAAI,CAAC,gDAAgD,EAAE,IAAI,CAACpB,UAAU,CAACqB,GAAG,CAACC,CAAA,IAAKA,CAAC,CAACX,WAAW,CAAC,CAAC,CAACC,IAAI,CAACC,CAAA,IAAK;QAC9GC,OAAO,CAACC,GAAG,CAACF,CAAC;QACbA,CAAC,CAACd,IAAI,CAACwB,OAAO,CAAC,CAACD,CAAC,EAAEE,CAAC,KAAK;UACvB,IAAI,CAACxB,UAAU,CAACwB,CAAC,CAAC,CAACb,WAAU,GAAI,IAAIf,aAAa,CAAC0B,CAAC,CAAC,CAACN,QAAQ,CAAC;QACjE,CAAC;MACH,CAAC,CAAC,CAACC,KAAK,CAAC,MAAM;QACbtB,OAAO,CAACuB,KAAK,CAAC,YAAY;MAC5B,CAAC;IACH;EACF,CAAC;EACDO,OAAOA,CAAA,EAAG;IACR/B,KAAK,CAACc,GAAG,CAAC,gDAAgD,CAAC,CAACI,IAAI,CAACC,CAAA,IAAK;MACpEC,OAAO,CAACC,GAAG,CAACF,CAAC;MACb,IAAI,CAACb,UAAS,GAAIa,CAAC,CAACd,IAAI;IAC1B,CAAC,CAAC,CAACkB,KAAK,CAAC,MAAM;MACbtB,OAAO,CAACuB,KAAK,CAAC,YAAY;IAC5B,CAAC;EACH;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}