{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, withCtx as _withCtx, createTextVNode as _createTextVNode, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-0734c984\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"1111\"\n}, \"产品代码选择\", -1 /* HOISTED */));\nconst _hoisted_5 = {\n  class: \"father\"\n};\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"left\"\n}, [/*#__PURE__*/_createElementVNode(\"div\", {\n  id: \"myChart123\",\n  style: {\n    width: '1100px',\n    height: '550px'\n  }\n})], -1 /* HOISTED */));\nconst _hoisted_7 = {\n  class: \"right\"\n};\nconst _hoisted_8 = {\n  key: 0\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_a_col = _resolveComponent(\"a-col\");\n  const _component_a_select_option = _resolveComponent(\"a-select-option\");\n  const _component_a_select = _resolveComponent(\"a-select\");\n  const _component_a_date_picker = _resolveComponent(\"a-date-picker\");\n  const _component_a_button = _resolveComponent(\"a-button\");\n  const _component_a_row = _resolveComponent(\"a-row\");\n  const _component_a_tag = _resolveComponent(\"a-tag\");\n  const _component_a_table = _resolveComponent(\"a-table\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _hoisted_3, _createVNode(_component_a_row, null, {\n    default: _withCtx(() => [_createVNode(_component_a_col, {\n      span: 1\n    }), _createVNode(_component_a_col, {\n      span: 4\n    }, {\n      default: _withCtx(() => [_createCommentVNode(\" <a-input\\r\\n          v-model:value=\\\"senddata.id\\\"\\r\\n          placeholder=\\\"产品代码\\\"\\r\\n          size=\\\"large\\\"\\r\\n          required\\r\\n        /> \"), _hoisted_4, _createVNode(_component_a_select, {\n        value: $setup.senddata.id,\n        \"onUpdate:value\": _cache[0] || (_cache[0] = $event => $setup.senddata.id = $event),\n        style: {\n          \"width\": \"250px\"\n        },\n        id: \"1111\",\n        size: \"large\"\n      }, {\n        default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.proarry, option => {\n          return _openBlock(), _createBlock(_component_a_select_option, {\n            value: option,\n            key: option\n          }, null, 8 /* PROPS */, [\"value\"]);\n        }), 128 /* KEYED_FRAGMENT */))]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"value\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_a_col, {\n      span: 1\n    }), _createVNode(_component_a_col, {\n      span: 2\n    }, {\n      default: _withCtx(() => [_createVNode(_component_a_date_picker, {\n        \"value-format\": 'YYYY-MM-DD',\n        placeholder: \"起始日期\",\n        size: \"large\",\n        value: $setup.senddata.start,\n        \"onUpdate:value\": _cache[1] || (_cache[1] = $event => $setup.senddata.start = $event)\n      }, null, 8 /* PROPS */, [\"value\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_a_col, {\n      span: 1\n    }), _createVNode(_component_a_col, {\n      span: 2\n    }, {\n      default: _withCtx(() => [_createVNode(_component_a_date_picker, {\n        \"value-format\": 'YYYY-MM-DD',\n        placeholder: \"终止日期\",\n        size: \"large\",\n        value: $setup.senddata.end,\n        \"onUpdate:value\": _cache[2] || (_cache[2] = $event => $setup.senddata.end = $event)\n      }, null, 8 /* PROPS */, [\"value\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_a_col, {\n      span: 1\n    }), _createVNode(_component_a_col, {\n      span: 2\n    }, {\n      default: _withCtx(() => [_createVNode(_component_a_button, {\n        onClick: $setup.getdata,\n        size: \"large\",\n        type: \"primary\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"查询\")]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }), _createElementVNode(\"div\", _hoisted_5, [_hoisted_6, _createElementVNode(\"div\", _hoisted_7, [_createVNode(_component_a_table, {\n    columns: $setup.columns,\n    \"data-source\": $setup.navlist\n  }, {\n    bodyCell: _withCtx(({\n      column,\n      record\n    }) => [column.key === 'increase' ? (_openBlock(), _createElementBlock(\"a\", _hoisted_8, [_createElementVNode(\"span\", null, [_createVNode(_component_a_tag, {\n      key: \"tag\",\n      color: $setup.getTextColor(record.up)\n    }, {\n      default: _withCtx(() => [_createTextVNode(_toDisplayString(record.increase), 1 /* TEXT */)]),\n      _: 2 /* DYNAMIC */\n    }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"color\"])])])) : _createCommentVNode(\"v-if\", true)]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"columns\", \"data-source\"])])])]);\n}","map":{"version":3,"names":["class","_createElementVNode","for","id","style","width","height","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_createVNode","_component_a_row","_component_a_col","span","_createCommentVNode","_hoisted_4","_component_a_select","value","$setup","senddata","$event","size","_Fragment","_renderList","proarry","option","_createBlock","_component_a_select_option","key","_component_a_date_picker","placeholder","start","end","_component_a_button","onClick","getdata","type","_hoisted_5","_hoisted_6","_hoisted_7","_component_a_table","columns","navlist","bodyCell","_withCtx","column","record","_hoisted_8","_component_a_tag","color","getTextColor","up","increase"],"sources":["H:\\GitHub-Repository\\hengsheng\\hello-world\\src\\components\\ViewNav.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <br />\r\n    <br />\r\n    <a-row>\r\n      <a-col :span=\"1\"></a-col>\r\n      <a-col :span=\"4\">\r\n        <!-- <a-input\r\n          v-model:value=\"senddata.id\"\r\n          placeholder=\"产品代码\"\r\n          size=\"large\"\r\n          required\r\n        /> -->\r\n        <label for=\"1111\">产品代码选择</label>\r\n        <a-select\r\n          v-model:value=\"senddata.id\"\r\n          style=\"width: 250px\"\r\n          id=\"1111\"\r\n          size=\"large\"\r\n        >\r\n          <a-select-option\r\n            v-for=\"option in proarry\"\r\n            :value=\"option\"\r\n            :key=\"option\"\r\n          ></a-select-option>\r\n        </a-select>\r\n      </a-col>\r\n      <a-col :span=\"1\"></a-col>\r\n      <a-col :span=\"2\">\r\n        <a-date-picker\r\n          :value-format=\"'YYYY-MM-DD'\"\r\n          placeholder=\"起始日期\"\r\n          size=\"large\"\r\n          v-model:value=\"senddata.start\"\r\n        />\r\n      </a-col>\r\n      <a-col :span=\"1\"></a-col>\r\n      <a-col :span=\"2\">\r\n        <a-date-picker\r\n          :value-format=\"'YYYY-MM-DD'\"\r\n          placeholder=\"终止日期\"\r\n          size=\"large\"\r\n          v-model:value=\"senddata.end\"\r\n        />\r\n      </a-col>\r\n      <a-col :span=\"1\"></a-col>\r\n      <a-col :span=\"2\">\r\n        <a-button @click=\"getdata\" size=\"large\" type=\"primary\">查询</a-button>\r\n      </a-col>\r\n    </a-row>\r\n\r\n    <div class=\"father\">\r\n      <div class=\"left\">\r\n        <div\r\n          id=\"myChart123\"\r\n          :style=\"{ width: '1100px', height: '550px' }\"\r\n        ></div>\r\n      </div>\r\n      <div class=\"right\">\r\n        <a-table :columns=\"columns\" :data-source=\"navlist\">\r\n          <template #bodyCell=\"{ column, record }\">\r\n            <template v-if=\"column.key === 'increase'\">\r\n              <a>\r\n                <span>\r\n                  <a-tag key=\"tag\" :color=\"getTextColor(record.up)\">\r\n                    {{ record.increase }}\r\n                  </a-tag>\r\n                </span>\r\n              </a>\r\n            </template>\r\n          </template>\r\n        </a-table>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"js\">\r\n// 引入echarts\r\nimport * as echarts from \"echarts\";\r\nimport { onMounted, ref ,computed} from \"vue\";\r\nimport axios from '../api/request'\r\nimport { message } from 'ant-design-vue';\r\n\r\n\r\nconst senddata = ref({ id: '', start: '', end: '' });\r\nconst data = ref({ nav: [] });\r\nconst proarry = ref([])\r\nconst product = ref([])\r\n\r\nconst params = {\r\n  id: senddata.value.id,\r\n  start: senddata.value.start,\r\n  end: senddata.value.end,\r\n};\r\n\r\n\r\nasync function getproduct() {\r\n  try {\r\n\r\n    const resp = await axios.get('/product', {\r\n      params: {\r\n        current: 1,\r\n        size: 5\r\n      }\r\n    })\r\n    //提出响应数据对象\r\n    ;\r\n    product.value = resp.data;\r\n    for (let x = 0; x < product.value.length;x++) {\r\n      proarry.value.push(product.value[x].id)\r\n    }\r\n\r\n\r\n    // 处理数据\r\n      console.log('获取成功');\r\n      console.log('product',product.value);\r\n      console.log('product',typeof(product.value));\r\n\r\n    console.log('proarry',proarry.value);\r\n    console.log('proarry',typeof(proarry.value));\r\n\r\n\r\n  } catch (error) {\r\n    // 处理错误\r\n    console.error(error);\r\n\r\n\r\n  }\r\n}\r\n\r\ngetproduct()\r\n\r\n\r\nfunction getdata() {\r\n  console.log(senddata.value)\r\n  console.log(typeof(senddata.value.start))\r\n  console.log(typeof(senddata.value.end))\r\n  axios.get('/product/nav',  {\r\n  params: {\r\n  id: senddata.value.id,\r\n  start: senddata.value.start,\r\n  end: senddata.value.end,\r\n}\r\n})\r\n  .then(response => {\r\n    // 处理响应数据\r\n    data.value = response.data;\r\n    // console.log(response.data);\r\n    // console.log(data.value.nav.map((obj)=>obj.date))\r\n    // console.log(data.value.nav.map((obj) => obj.nav))\r\n    if (data.value.success) {\r\n      view();\r\n        message.success(`查询到id为${senddata.value.id}的净值`)\r\n        const navss =navcom()\r\n        console.log(navss);\r\n    }\r\n    else\r\n      message.error(`查询失败${data.value.message}`);\r\n\r\n  })\r\n  .catch(error => {\r\n    // 处理错误\r\n    console.error(error);\r\n  });\r\n\r\n}\r\n\r\nconst view = () => {\r\n  // 需要获取到element,所以是onMounted的Hook\r\n  let myChart = echarts.init(document.getElementById(\"myChart123\"));\r\n  // 绘制图表\r\n  myChart.setOption({\r\n    xAxis: {\r\n      type: 'category',\r\n      data: data.value.nav.map((obj) => obj.date),\r\n      boundaryGap: false,\r\n    },\r\n    yAxis: {\r\n      type: 'value',\r\n      name: '产品净值'\r\n    },\r\n    tooltip: {\r\n    trigger: 'axis',\r\n    axisPointer: {\r\n      type: 'cross'\r\n    },\r\n    formatter: function(params) {\r\n      var xValue = params[0].axisValue;\r\n      var yValue = params[0].data;\r\n      return '日期：' + xValue + '<br />' + '净值：' + yValue;\r\n    }\r\n  },\r\n    series: [\r\n      {\r\n        name: \"日期\",\r\n        type: \"line\",\r\n        data: data.value.nav.map((obj) => obj.nav),\r\n        areaStyle: {}\r\n\r\n      },\r\n    ],\r\n  });\r\n  window.onresize = function () {\r\n    // 自适应大小\r\n    myChart.resize();\r\n  };\r\n}\r\n\r\n\r\n//右侧展示\r\nconst navlist = ref([])\r\nfunction navcom() {\r\n    navlist.value = [];\r\n\r\n    for (let i = 0; i < data.value.nav.length; i++) {\r\n        if (i == 0)\r\n            navlist.value.push({\r\n                date: data.value.nav[i].date,\r\n                nav: data.value.nav[i].nav.toFixed(4),\r\n                increase: 0,\r\n                up:0\r\n            });\r\n        else {\r\n            navlist.value.push({\r\n                date: data.value.nav[i].date,\r\n                nav: data.value.nav[i].nav.toFixed(4),\r\n                increase: ((data.value.nav[i].nav / data.value.nav[i - 1].nav - 1)*100).toFixed(2)+'%',\r\n                up: compare(data.value.nav[i].nav,data.value.nav[i - 1].nav)\r\n            });\r\n        }\r\n\r\n}\r\n\r\n    return navlist.value.reverse()\r\n}\r\n\r\nfunction compare(x, y) {\r\n\r\n    if (x === y)\r\n        return 0;\r\n    if (x > y)\r\n        return 1;\r\n    if (x < y)\r\n        return -1;\r\n}\r\n\r\n//>>>>>>>>>颜色控制\r\nfunction getTextColor(text) {\r\n      // 自定义逻辑来返回不同的字体颜色\r\n      if (text === -1) {\r\n        return 'green';\r\n      } else if(text===0){\r\n        return 'black';\r\n      } else {\r\n        return 'red'\r\n      }\r\n}\r\n\r\n// >>>>>>>>>>>>表格列\r\nconst columns = ref([\r\n  {\r\n    title:'日期',\r\n    dataIndex: 'date',\r\n    key : 'date'\r\n    },\r\n\r\n  {\r\n    title:'净值',\r\n    dataIndex: 'nav',\r\n    key : 'nav'\r\n    },\r\n\r\n  {\r\n    title:'增长率',\r\n    dataIndex: 'increase',\r\n    key : 'increase'\r\n  }\r\n])\r\n</script>\r\n\r\n<style scoped>\r\n.father {\r\n  display: flex;\r\n}\r\n\r\n.left {\r\n  flex: 1; /* 占据 3/4 的空间 */\r\n}\r\n\r\n.right {\r\n  flex: 1; /* 占据 1/4 的空间 */\r\n}\r\n</style>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}