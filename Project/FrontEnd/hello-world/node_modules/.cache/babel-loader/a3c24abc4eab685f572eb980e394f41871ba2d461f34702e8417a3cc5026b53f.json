{"ast":null,"code":"import { defineComponent } from 'vue';\nimport axios from \"@/api/request\";\nimport { message } from \"ant-design-vue\";\nexport default defineComponent({\n  name: \"confirm-transaction\",\n  props: [\"taData\"],\n  emits: ['next'],\n  data() {\n    return {\n      date: new Date().toISOString().split('T')[0],\n      totalAmount: null,\n      dataSource: null,\n      columns: [{\n        title: '基金代码',\n        dataIndex: 'id'\n      }, {\n        title: '基金简称',\n        dataIndex: 'shortName'\n      }, {\n        title: '单位净值',\n        dataIndex: 'nav'\n      }, {\n        title: '发行总份额',\n        dataIndex: 'totalShare'\n      }]\n    };\n  },\n  methods: {\n    confirm() {\n      axios.post(\"http://118.25.19.55:9901/settlement\", {\n        date: this.date,\n        totalAssetsList: this.taData\n      }).then(r => {\n        console.log(r);\n        if (!r.data.success) {\n          message.error(r.data.message);\n        } else {\n          message.success(r.data.message);\n          this.totalAmount = r.data.transactionAmount;\n          this.dataSource = r.data.newProductData;\n        }\n      }).catch(_ => {\n        message.error(\"系统错误，请稍后再试\");\n      });\n    }\n  }\n});","map":{"version":3,"names":["defineComponent","axios","message","name","props","emits","data","date","Date","toISOString","split","totalAmount","dataSource","columns","title","dataIndex","methods","confirm","post","totalAssetsList","taData","then","r","console","log","success","error","transactionAmount","newProductData","catch","_"],"sources":["H:\\GitHub-Repository\\hengsheng\\hello-world\\src\\components\\Business\\Settlement\\confirm.vue"],"sourcesContent":["<script>\r\nimport {defineComponent} from 'vue'\r\nimport axios from \"@/api/request\";\r\nimport {message} from \"ant-design-vue\";\r\n\r\nexport default defineComponent({\r\n  name: \"confirm-transaction\",\r\n  props: [\"taData\"],\r\n  emits: ['next'],\r\n  data() {\r\n    return {\r\n      date: new Date().toISOString().split('T')[0],\r\n      totalAmount: null,\r\n      dataSource: null,\r\n      columns: [\r\n        {\r\n          title: '基金代码',\r\n          dataIndex: 'id',\r\n        },\r\n        {\r\n          title: '基金简称',\r\n          dataIndex: 'shortName',\r\n        },\r\n        {\r\n          title: '单位净值',\r\n          dataIndex: 'nav',\r\n        },\r\n        {\r\n          title: '发行总份额',\r\n          dataIndex: 'totalShare',\r\n        },\r\n      ]\r\n    }\r\n  },\r\n  methods: {\r\n    confirm() {\r\n      axios.post(\"http://118.25.19.55:9901/settlement\", {\r\n        date: this.date,\r\n        totalAssetsList: this.taData\r\n      }).then(r => {\r\n        console.log(r)\r\n        if (!r.data.success) {\r\n          message.error(r.data.message)\r\n        } else {\r\n          message.success(r.data.message)\r\n          this.totalAmount = r.data.transactionAmount;\r\n          this.dataSource = r.data.newProductData;\r\n        }\r\n      }).catch(_ => {\r\n        message.error(\"系统错误，请稍后再试\")\r\n      })\r\n    }\r\n  }\r\n})\r\n</script>\r\n\r\n<template>\r\n  <h2>交易确认</h2>\r\n  <span>点击开始下方按钮后，系统将自动完成前一交易日的交易确认。</span>\r\n\r\n  <a-divider/>\r\n\r\n  <p>交易确认的内容：</p>\r\n  <ul>\r\n    <li>将上一步提交的资产总值应用到基金中。</li>\r\n    <li>将客户的申购和赎回进行确认，并将份额变化和资产总值变化应用到基金中。</li>\r\n    <li>重新计算基金的单位净值。</li>\r\n  </ul>\r\n  <p>交易确认过程可能耗时数秒，请耐心等候。</p>\r\n\r\n  <div class=\"flex-container\" style=\"margin: 20px 0\">\r\n    <p style=\"margin: auto 0\">确认结算日期：</p>\r\n    <a-input style=\"width: 100px\" v-model:value=\"date\"></a-input>\r\n  </div>\r\n\r\n  <a-space>\r\n    <a-button type=\"primary\" style=\"margin: 20px 0\" @click=\"confirm\">开始交易确认</a-button>\r\n    <a-button style=\"margin: 20px 0\" v-if=\"totalAmount!==null\" @click=\"$emit('next')\">下一步</a-button>\r\n  </a-space>\r\n\r\n  <a-divider/>\r\n\r\n  <h2 v-if=\"totalAmount!==null\">上一日成交额：{{ totalAmount }}</h2>\r\n\r\n  <div class=\"tb-container\" v-if=\"dataSource!==null\">\r\n    <a-table :columns=\"columns\" :data-source=\"dataSource\" rowKey=\"id\" bordered>\r\n      <template #bodyCell=\"{ text }\">\r\n        <div>\r\n          {{ text }}\r\n        </div>\r\n      </template>\r\n    </a-table>\r\n  </div>\r\n\r\n\r\n</template>\r\n\r\n<style scoped>\r\n.flex-container {\r\n  display: flex;\r\n}\r\n\r\nli {\r\n  margin: 10px 0;\r\n}\r\n</style>"],"mappings":"AACA,SAAQA,eAAe,QAAO,KAAI;AAClC,OAAOC,KAAI,MAAO,eAAe;AACjC,SAAQC,OAAO,QAAO,gBAAgB;AAEtC,eAAeF,eAAe,CAAC;EAC7BG,IAAI,EAAE,qBAAqB;EAC3BC,KAAK,EAAE,CAAC,QAAQ,CAAC;EACjBC,KAAK,EAAE,CAAC,MAAM,CAAC;EACfC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,IAAI,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;MAC5CC,WAAW,EAAE,IAAI;MACjBC,UAAU,EAAE,IAAI;MAChBC,OAAO,EAAE,CACP;QACEC,KAAK,EAAE,MAAM;QACbC,SAAS,EAAE;MACb,CAAC,EACD;QACED,KAAK,EAAE,MAAM;QACbC,SAAS,EAAE;MACb,CAAC,EACD;QACED,KAAK,EAAE,MAAM;QACbC,SAAS,EAAE;MACb,CAAC,EACD;QACED,KAAK,EAAE,OAAO;QACdC,SAAS,EAAE;MACb,CAAC;IAEL;EACF,CAAC;EACDC,OAAO,EAAE;IACPC,OAAOA,CAAA,EAAG;MACRhB,KAAK,CAACiB,IAAI,CAAC,qCAAqC,EAAE;QAChDX,IAAI,EAAE,IAAI,CAACA,IAAI;QACfY,eAAe,EAAE,IAAI,CAACC;MACxB,CAAC,CAAC,CAACC,IAAI,CAACC,CAAA,IAAK;QACXC,OAAO,CAACC,GAAG,CAACF,CAAC;QACb,IAAI,CAACA,CAAC,CAAChB,IAAI,CAACmB,OAAO,EAAE;UACnBvB,OAAO,CAACwB,KAAK,CAACJ,CAAC,CAAChB,IAAI,CAACJ,OAAO;QAC9B,OAAO;UACLA,OAAO,CAACuB,OAAO,CAACH,CAAC,CAAChB,IAAI,CAACJ,OAAO;UAC9B,IAAI,CAACS,WAAU,GAAIW,CAAC,CAAChB,IAAI,CAACqB,iBAAiB;UAC3C,IAAI,CAACf,UAAS,GAAIU,CAAC,CAAChB,IAAI,CAACsB,cAAc;QACzC;MACF,CAAC,CAAC,CAACC,KAAK,CAACC,CAAA,IAAK;QACZ5B,OAAO,CAACwB,KAAK,CAAC,YAAY;MAC5B,CAAC;IACH;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}