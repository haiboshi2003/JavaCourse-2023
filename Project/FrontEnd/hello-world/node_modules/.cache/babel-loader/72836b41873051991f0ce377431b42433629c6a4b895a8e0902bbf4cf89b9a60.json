{"ast":null,"code":"import { defineComponent } from 'vue';\nimport SelectUserModal from \"@/components/Business/Tools/SelectUserModal.vue\";\nimport axios from \"@/api/request\";\nimport { message } from \"ant-design-vue\";\nexport default defineComponent({\n  name: \"Transactions-service\",\n  components: {\n    SelectUserModal\n  },\n  data() {\n    return {\n      sumShow: false,\n      selectedCustomer: {\n        id: \"\",\n        name: \"\"\n      },\n      dataSource: [],\n      columns: [{\n        title: '交易编号',\n        dataIndex: 'id'\n      }, {\n        title: '基金代码',\n        dataIndex: 'fundId'\n      }, {\n        title: '交易类型',\n        dataIndex: 'type'\n      }, {\n        title: '交易状态',\n        dataIndex: 'status'\n      }, {\n        title: '交易金额（份额）',\n        dataIndex: 'amount'\n      }, {\n        title: '提交时间',\n        dataIndex: 'transactionTime'\n      }, {\n        title: '确认时间',\n        dataIndex: 'settlementTime'\n      }, {\n        title: '操作',\n        dataIndex: 'operation'\n      }]\n    };\n  },\n  methods: {\n    query() {\n      if (this.selectedCustomer.id !== \"\") {\n        axios.get(\"http://118.25.19.55:9901/transaction\", {\n          params: {\n            id: this.selectedCustomer.id,\n            current: 1,\n            size: 10000\n          }\n        }).then(r => {\n          console.log(r);\n          this.dataSource = r.data;\n        }).catch(() => {\n          message.error(\"系统错误，请稍后再试\");\n        });\n      }\n    },\n    withdraw(id) {\n      if (id !== \"\") {\n        axios.delete(\"http://118.25.19.55:9901/transaction\", {\n          params: {\n            transactionId: id\n          }\n        }).then(r => {\n          message.success(r.data.message);\n          this.query();\n        }).catch(() => {\n          message.error(\"系统错误，请稍后再试\");\n        });\n      }\n    }\n  }\n});","map":{"version":3,"names":["defineComponent","SelectUserModal","axios","message","name","components","data","sumShow","selectedCustomer","id","dataSource","columns","title","dataIndex","methods","query","get","params","current","size","then","r","console","log","catch","error","withdraw","delete","transactionId","success"],"sources":["H:\\GitHub-Repository\\hengsheng\\hello-world\\src\\components\\Business\\Transactions.vue"],"sourcesContent":["<script>\r\nimport {defineComponent} from 'vue'\r\nimport SelectUserModal from \"@/components/Business/Tools/SelectUserModal.vue\";\r\nimport axios from \"@/api/request\";\r\nimport {message} from \"ant-design-vue\";\r\n\r\nexport default defineComponent({\r\n  name: \"Transactions-service\",\r\n  components: {SelectUserModal},\r\n  data() {\r\n    return {\r\n      sumShow: false,\r\n      selectedCustomer: {\r\n        id: \"\",\r\n        name: \"\"\r\n      },\r\n      dataSource: [],\r\n      columns: [\r\n        {\r\n          title: '交易编号',\r\n          dataIndex: 'id',\r\n        },\r\n        {\r\n          title: '基金代码',\r\n          dataIndex: 'fundId',\r\n        },\r\n        {\r\n          title: '交易类型',\r\n          dataIndex: 'type',\r\n        },\r\n        {\r\n          title: '交易状态',\r\n          dataIndex: 'status',\r\n        },\r\n        {\r\n          title: '交易金额（份额）',\r\n          dataIndex: 'amount',\r\n        },\r\n        {\r\n          title: '提交时间',\r\n          dataIndex: 'transactionTime',\r\n        },\r\n        {\r\n          title: '确认时间',\r\n          dataIndex: 'settlementTime',\r\n        },\r\n        {\r\n          title: '操作',\r\n          dataIndex: 'operation',\r\n        },\r\n      ],\r\n    }\r\n  },\r\n  methods: {\r\n    query() {\r\n      if (this.selectedCustomer.id !== \"\") {\r\n        axios.get(\"http://118.25.19.55:9901/transaction\", {\r\n          params: {\r\n            id: this.selectedCustomer.id,\r\n            current: 1,\r\n            size: 10000\r\n          }\r\n        }).then(r => {\r\n          console.log(r)\r\n          this.dataSource = r.data;\r\n        }).catch(() => {\r\n          message.error(\"系统错误，请稍后再试\")\r\n        })\r\n      }\r\n    },\r\n    withdraw(id) {\r\n      if (id !== \"\") {\r\n        axios.delete(\"http://118.25.19.55:9901/transaction\", {\r\n          params: {\r\n            transactionId: id\r\n          }\r\n        }).then(r => {\r\n          message.success(r.data.message);\r\n          this.query();\r\n        }).catch(() => {\r\n          message.error(\"系统错误，请稍后再试\")\r\n        })\r\n      }\r\n    }\r\n  }\r\n})\r\n</script>\r\n\r\n<template>\r\n  <SelectUserModal v-model:show-modal=\"sumShow\" :handle-ok=\"c=>{selectedCustomer=c;sumShow=false}\"\r\n                   :handle-cancel=\"()=>{sumShow=false}\"/>\r\n  <div class=\"container\">\r\n    <h1>查单、撤单</h1>\r\n    <h2>欢迎使用查单、撤单系统。</h2>\r\n\r\n    <a-divider/>\r\n\r\n    <a-space direction=\"vertical\" :size=\"20\">\r\n      <a-space>\r\n        <span>选择待查客户：</span>\r\n        <a-button @click=\"sumShow=true\">选择客户</a-button>\r\n      </a-space>\r\n\r\n      <a-space>\r\n        <span>身份证号或法人代码</span>\r\n        <a-input :value=\"selectedCustomer.id\" :disabled=\"true\"></a-input>\r\n        <span>名称</span>\r\n        <a-input :value=\"selectedCustomer.name\" :disabled=\"true\"></a-input>\r\n        <a-button :disabled=\"selectedCustomer.id===''\" @click=\"query\">查询</a-button>\r\n      </a-space>\r\n    </a-space>\r\n\r\n    <a-divider/>\r\n\r\n    <div class=\"tb-container\">\r\n      <a-table :columns=\"columns\" :data-source=\"dataSource\" rowKey=\"id\" bordered>\r\n        <template #bodyCell=\"{ column, text, record }\">\r\n          <template v-if=\"column.dataIndex==='status'\">\r\n            <div>\r\n              {{ record.status === 0 ? \"待确认\" : (record.status === 1 ? \"已确认\" : \"已撤单\") }}\r\n            </div>\r\n          </template>\r\n          <template v-else-if=\"column.dataIndex==='type'\">\r\n            <div>\r\n              {{ record.type === 0 ? \"申购\" : \"赎回\" }}\r\n            </div>\r\n          </template>\r\n          <template v-else-if=\"column.dataIndex==='operation'\">\r\n            <div>\r\n              <a-button @click=\"withdraw(record.id)\">撤单</a-button>\r\n            </div>\r\n          </template>\r\n          <template v-else>\r\n            <div>\r\n              {{ text }}\r\n            </div>\r\n          </template>\r\n        </template>\r\n      </a-table>\r\n    </div>\r\n\r\n\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n.container {\r\n  margin: 50px;\r\n}\r\n\r\nh1 {\r\n  font-size: 3em;\r\n}\r\n\r\n.tb-container {\r\n  margin: 20px 0;\r\n}\r\n</style>"],"mappings":"AACA,SAAQA,eAAe,QAAO,KAAI;AAClC,OAAOC,eAAc,MAAO,iDAAiD;AAC7E,OAAOC,KAAI,MAAO,eAAe;AACjC,SAAQC,OAAO,QAAO,gBAAgB;AAEtC,eAAeH,eAAe,CAAC;EAC7BI,IAAI,EAAE,sBAAsB;EAC5BC,UAAU,EAAE;IAACJ;EAAe,CAAC;EAC7BK,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,OAAO,EAAE,KAAK;MACdC,gBAAgB,EAAE;QAChBC,EAAE,EAAE,EAAE;QACNL,IAAI,EAAE;MACR,CAAC;MACDM,UAAU,EAAE,EAAE;MACdC,OAAO,EAAE,CACP;QACEC,KAAK,EAAE,MAAM;QACbC,SAAS,EAAE;MACb,CAAC,EACD;QACED,KAAK,EAAE,MAAM;QACbC,SAAS,EAAE;MACb,CAAC,EACD;QACED,KAAK,EAAE,MAAM;QACbC,SAAS,EAAE;MACb,CAAC,EACD;QACED,KAAK,EAAE,MAAM;QACbC,SAAS,EAAE;MACb,CAAC,EACD;QACED,KAAK,EAAE,UAAU;QACjBC,SAAS,EAAE;MACb,CAAC,EACD;QACED,KAAK,EAAE,MAAM;QACbC,SAAS,EAAE;MACb,CAAC,EACD;QACED,KAAK,EAAE,MAAM;QACbC,SAAS,EAAE;MACb,CAAC,EACD;QACED,KAAK,EAAE,IAAI;QACXC,SAAS,EAAE;MACb,CAAC;IAEL;EACF,CAAC;EACDC,OAAO,EAAE;IACPC,KAAKA,CAAA,EAAG;MACN,IAAI,IAAI,CAACP,gBAAgB,CAACC,EAAC,KAAM,EAAE,EAAE;QACnCP,KAAK,CAACc,GAAG,CAAC,sCAAsC,EAAE;UAChDC,MAAM,EAAE;YACNR,EAAE,EAAE,IAAI,CAACD,gBAAgB,CAACC,EAAE;YAC5BS,OAAO,EAAE,CAAC;YACVC,IAAI,EAAE;UACR;QACF,CAAC,CAAC,CAACC,IAAI,CAACC,CAAA,IAAK;UACXC,OAAO,CAACC,GAAG,CAACF,CAAC;UACb,IAAI,CAACX,UAAS,GAAIW,CAAC,CAACf,IAAI;QAC1B,CAAC,CAAC,CAACkB,KAAK,CAAC,MAAM;UACbrB,OAAO,CAACsB,KAAK,CAAC,YAAY;QAC5B,CAAC;MACH;IACF,CAAC;IACDC,QAAQA,CAACjB,EAAE,EAAE;MACX,IAAIA,EAAC,KAAM,EAAE,EAAE;QACbP,KAAK,CAACyB,MAAM,CAAC,sCAAsC,EAAE;UACnDV,MAAM,EAAE;YACNW,aAAa,EAAEnB;UACjB;QACF,CAAC,CAAC,CAACW,IAAI,CAACC,CAAA,IAAK;UACXlB,OAAO,CAAC0B,OAAO,CAACR,CAAC,CAACf,IAAI,CAACH,OAAO,CAAC;UAC/B,IAAI,CAACY,KAAK,CAAC,CAAC;QACd,CAAC,CAAC,CAACS,KAAK,CAAC,MAAM;UACbrB,OAAO,CAACsB,KAAK,CAAC,YAAY;QAC5B,CAAC;MACH;IACF;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}