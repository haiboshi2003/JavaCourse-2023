{"ast":null,"code":"import { ref } from \"vue\";\nimport axios from \"@/api/request\";\nimport { message } from \"ant-design-vue\";\nexport default {\n  __name: 'addtitle',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const svgFileInput = ref(null); // 定义文件输入的引用\n    const imgFileInput = ref(null); // 定义文件输入的引用\n    const voiceFileInput = ref(null); // 定义文件输入的引用\n\n    const requestdata = ref({\n      titleName: \"\",\n      projectName: \"\",\n      description: \"\",\n      textdata: \"\",\n      imgfile: \"\",\n      svgfile: \"\",\n      voicefile: \"\"\n    });\n    function print() {\n      console.log(requestdata.value);\n    }\n    const handleImgFileChange = () => {\n      requestdata.value.imgfile = Array.from(imgFileInput.value.files);\n    };\n    const handleSvgFileChange = () => {\n      requestdata.value.svgfile = Array.from(svgFileInput.value.files);\n    };\n    const handleVoiceFileChange = () => {\n      requestdata.value.voicefile = Array.from(voiceFileInput.value.files);\n    };\n    const sendToBackend = () => {\n      if (!requestdata.value.titleName.trim()) {\n        message.error(\"题目名称不能为空\", 2);\n        return;\n      }\n      if (!requestdata.value.projectName.trim()) {\n        message.error(\"学科不能为空\", 2);\n        return;\n      }\n\n      // 构建FormData对象\n      const formData = new FormData();\n      formData.append(\"titleName\", requestdata.value.titleName);\n      formData.append(\"textData\", requestdata.value.textdata);\n      formData.append(\"description\", requestdata.value.description);\n      if (requestdata.value.imgfile[0]) {\n        formData.append(\"imgFile\", requestdata.value.imgfile[0]);\n      }\n      if (requestdata.value.svgfile[0]) {\n        formData.append(\"svgFile\", requestdata.value.svgfile[0]);\n      }\n      if (requestdata.value.voicefile[0]) {\n        formData.append(\"voiceFile\", requestdata.value.voicefile[0]);\n      }\n      console.log(requestdata.value.file);\n      console.log(formData);\n      // 发送POST请求\n      axios.post(\"/title/add\", formData).then(response => {\n        console.log(\"success Response from backend:\", response.data);\n        if (response.data.success == \"success\") {\n          message.success(\"添加题目成功\", 2);\n        } else {\n          message.error(response.data.message);\n        }\n      }).catch(error => {\n        console.error(\"Error sending data to backend:\", error.message);\n      });\n    };\n    const __returned__ = {\n      svgFileInput,\n      imgFileInput,\n      voiceFileInput,\n      requestdata,\n      print,\n      handleImgFileChange,\n      handleSvgFileChange,\n      handleVoiceFileChange,\n      sendToBackend,\n      ref,\n      get axios() {\n        return axios;\n      },\n      get message() {\n        return message;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","axios","message","svgFileInput","imgFileInput","voiceFileInput","requestdata","titleName","projectName","description","textdata","imgfile","svgfile","voicefile","print","console","log","value","handleImgFileChange","Array","from","files","handleSvgFileChange","handleVoiceFileChange","sendToBackend","trim","error","formData","FormData","append","file","post","then","response","data","success","catch"],"sources":["H:/GitHub-Repository/hengsheng/hello-world/src/components/addtitle.vue"],"sourcesContent":["<template>\r\n  <!-- 学科名称 -->\r\n  <el-input v-model=\"requestdata.projectName\" placeholder=\"请输入学科名称\" />\r\n  <!-- 题目名称 -->\r\n  <el-input v-model=\"requestdata.titleName\" placeholder=\"请输入题目名称\" />\r\n\r\n  <!-- 文字题干 -->\r\n  <el-input\r\n    v-model=\"requestdata.textdata\"\r\n    :autosize=\"{ minRows: 2, maxRows: 4 }\"\r\n    type=\"textarea\"\r\n    placeholder=\"请输入题干\"\r\n  />\r\n  <!-- 题目额外信息 -->\r\n  <el-input\r\n    v-model=\"requestdata.description\"\r\n    :autosize=\"{ minRows: 2, maxRows: 4 }\"\r\n    type=\"textarea\"\r\n    placeholder=\"请输入题目额外的描述信息\"\r\n  />\r\n\r\n  <!-- 上传图像文件 -->\r\n  <input type=\"file\" ref=\"imgFileInput\" @change=\"handleImgFileChange\" />\r\n\r\n  <!-- 上传图形文件 -->\r\n  <input type=\"file\" ref=\"svgFileInput\" @change=\"handleSvgFileChange\" />\r\n\r\n  <!-- 上传语音文件 -->\r\n  <input type=\"file\" ref=\"voiceFileInput\" @change=\"handleVoiceFileChange\" />\r\n\r\n  <button @click=\"sendToBackend\">cilck</button>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from \"vue\";\r\nimport axios from \"@/api/request\";\r\nimport { message } from \"ant-design-vue\";\r\n\r\nconst svgFileInput = ref(null); // 定义文件输入的引用\r\nconst imgFileInput = ref(null); // 定义文件输入的引用\r\nconst voiceFileInput = ref(null); // 定义文件输入的引用\r\n\r\nconst requestdata = ref({\r\n  titleName: \"\",\r\n  projectName: \"\",\r\n  description: \"\",\r\n\r\n  textdata: \"\",\r\n  imgfile: \"\",\r\n  svgfile: \"\",\r\n  voicefile: \"\",\r\n});\r\nfunction print() {\r\n  console.log(requestdata.value);\r\n}\r\n\r\nconst handleImgFileChange = () => {\r\n  requestdata.value.imgfile = Array.from(imgFileInput.value.files);\r\n};\r\n\r\nconst handleSvgFileChange = () => {\r\n  requestdata.value.svgfile = Array.from(svgFileInput.value.files);\r\n};\r\n\r\nconst handleVoiceFileChange = () => {\r\n  requestdata.value.voicefile = Array.from(voiceFileInput.value.files);\r\n};\r\n\r\nconst sendToBackend = () => {\r\n  if (!requestdata.value.titleName.trim()) {\r\n    message.error(\"题目名称不能为空\", 2);\r\n    return;\r\n  }\r\n  if (!requestdata.value.projectName.trim()) {\r\n    message.error(\"学科不能为空\", 2);\r\n    return;\r\n  }\r\n\r\n  // 构建FormData对象\r\n  const formData = new FormData();\r\n  formData.append(\"titleName\", requestdata.value.titleName);\r\n  formData.append(\"textData\", requestdata.value.textdata);\r\n  formData.append(\"description\", requestdata.value.description);\r\n  if (requestdata.value.imgfile[0]) {\r\n    formData.append(\"imgFile\", requestdata.value.imgfile[0]);\r\n  }\r\n  if (requestdata.value.svgfile[0]) {\r\n    formData.append(\"svgFile\", requestdata.value.svgfile[0]);\r\n  }\r\n  if (requestdata.value.voicefile[0]) {\r\n    formData.append(\"voiceFile\", requestdata.value.voicefile[0]);\r\n  }\r\n\r\n  console.log(requestdata.value.file);\r\n  console.log(formData);\r\n  // 发送POST请求\r\n  axios\r\n    .post(\"/title/add\", formData)\r\n    .then((response) => {\r\n      console.log(\"success Response from backend:\", response.data);\r\n      if (response.data.success == \"success\") {\r\n        message.success(\"添加题目成功\", 2);\r\n      } else {\r\n        message.error(response.data.message);\r\n      }\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"Error sending data to backend:\", error.message);\r\n    });\r\n};\r\n</script>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}