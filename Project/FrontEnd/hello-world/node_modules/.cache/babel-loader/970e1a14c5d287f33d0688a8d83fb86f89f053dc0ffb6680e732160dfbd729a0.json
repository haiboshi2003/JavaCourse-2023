{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createElementBlock as _createElementBlock, Fragment as _Fragment, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-22d0bc29\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", null, \"交易确认\", -1 /* HOISTED */));\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, \"点击开始下方按钮后，系统将自动完成前一交易日的交易确认。\", -1 /* HOISTED */));\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, \"交易确认的内容：\", -1 /* HOISTED */));\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"ul\", null, [/*#__PURE__*/_createElementVNode(\"li\", null, \"将上一步提交的资产总值应用到基金中。\"), /*#__PURE__*/_createElementVNode(\"li\", null, \"将客户的申购和赎回进行确认，并将份额变化和资产总值变化应用到基金中。\"), /*#__PURE__*/_createElementVNode(\"li\", null, \"重新计算基金的单位净值。\")], -1 /* HOISTED */));\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, \"交易确认过程可能耗时数秒，请耐心等候。\", -1 /* HOISTED */));\nconst _hoisted_6 = {\n  class: \"flex-container\",\n  style: {\n    \"margin\": \"20px 0\"\n  }\n};\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", {\n  style: {\n    \"margin\": \"auto 0\"\n  }\n}, \"确认结算日期：\", -1 /* HOISTED */));\nconst _hoisted_8 = {\n  key: 0\n};\nconst _hoisted_9 = {\n  key: 1,\n  class: \"tb-container\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_a_divider = _resolveComponent(\"a-divider\");\n  const _component_a_input = _resolveComponent(\"a-input\");\n  const _component_a_button = _resolveComponent(\"a-button\");\n  const _component_a_space = _resolveComponent(\"a-space\");\n  const _component_a_table = _resolveComponent(\"a-table\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_hoisted_1, _hoisted_2, _createVNode(_component_a_divider), _hoisted_3, _hoisted_4, _hoisted_5, _createElementVNode(\"div\", _hoisted_6, [_hoisted_7, _createVNode(_component_a_input, {\n    style: {\n      \"width\": \"100px\"\n    },\n    value: _ctx.date,\n    \"onUpdate:value\": _cache[0] || (_cache[0] = $event => _ctx.date = $event)\n  }, null, 8 /* PROPS */, [\"value\"])]), _createVNode(_component_a_space, null, {\n    default: _withCtx(() => [_createVNode(_component_a_button, {\n      type: \"primary\",\n      style: {\n        \"margin\": \"20px 0\"\n      },\n      onClick: _ctx.confirm\n    }, {\n      default: _withCtx(() => [_createTextVNode(\"开始交易确认\")]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\"]), _ctx.totalAmount !== null ? (_openBlock(), _createBlock(_component_a_button, {\n      key: 0,\n      style: {\n        \"margin\": \"20px 0\"\n      },\n      onClick: _cache[1] || (_cache[1] = $event => _ctx.$emit('next'))\n    }, {\n      default: _withCtx(() => [_createTextVNode(\"下一步\")]),\n      _: 1 /* STABLE */\n    })) : _createCommentVNode(\"v-if\", true)]),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_a_divider), _ctx.totalAmount !== null ? (_openBlock(), _createElementBlock(\"h2\", _hoisted_8, \"上一日成交额：\" + _toDisplayString(_ctx.totalAmount), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _ctx.dataSource !== null ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [_createVNode(_component_a_table, {\n    columns: _ctx.columns,\n    \"data-source\": _ctx.dataSource,\n    rowKey: \"id\",\n    bordered: \"\"\n  }, {\n    bodyCell: _withCtx(({\n      text\n    }) => [_createElementVNode(\"div\", null, _toDisplayString(text), 1 /* TEXT */)]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"columns\", \"data-source\"])])) : _createCommentVNode(\"v-if\", true)], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["_createElementVNode","class","style","_hoisted_1","_hoisted_2","_createVNode","_component_a_divider","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_component_a_input","value","_ctx","date","$event","_component_a_space","_component_a_button","type","onClick","confirm","totalAmount","_createBlock","_cache","$emit","_createElementBlock","_hoisted_8","_toDisplayString","dataSource","_hoisted_9","_component_a_table","columns","rowKey","bordered","bodyCell","_withCtx","text"],"sources":["H:\\GitHub-Repository\\hengsheng\\hello-world\\src\\components\\Business\\Settlement\\confirm.vue"],"sourcesContent":["<script>\r\nimport {defineComponent} from 'vue'\r\nimport axios from \"@/api/request\";\r\nimport {message} from \"ant-design-vue\";\r\n\r\nexport default defineComponent({\r\n  name: \"confirm-transaction\",\r\n  props: [\"taData\"],\r\n  emits: ['next'],\r\n  data() {\r\n    return {\r\n      date: new Date().toISOString().split('T')[0],\r\n      totalAmount: null,\r\n      dataSource: null,\r\n      columns: [\r\n        {\r\n          title: '基金代码',\r\n          dataIndex: 'id',\r\n        },\r\n        {\r\n          title: '基金简称',\r\n          dataIndex: 'shortName',\r\n        },\r\n        {\r\n          title: '单位净值',\r\n          dataIndex: 'nav',\r\n        },\r\n        {\r\n          title: '发行总份额',\r\n          dataIndex: 'totalShare',\r\n        },\r\n      ]\r\n    }\r\n  },\r\n  methods: {\r\n    confirm() {\r\n      axios.post(\"http://118.25.19.55:9901/settlement\", {\r\n        date: this.date,\r\n        totalAssetsList: this.taData\r\n      }).then(r => {\r\n        console.log(r)\r\n        if (!r.data.success) {\r\n          message.error(r.data.message)\r\n        } else {\r\n          message.success(r.data.message)\r\n          this.totalAmount = r.data.transactionAmount;\r\n          this.dataSource = r.data.newProductData;\r\n        }\r\n      }).catch(_ => {\r\n        message.error(\"系统错误，请稍后再试\")\r\n      })\r\n    }\r\n  }\r\n})\r\n</script>\r\n\r\n<template>\r\n  <h2>交易确认</h2>\r\n  <span>点击开始下方按钮后，系统将自动完成前一交易日的交易确认。</span>\r\n\r\n  <a-divider/>\r\n\r\n  <p>交易确认的内容：</p>\r\n  <ul>\r\n    <li>将上一步提交的资产总值应用到基金中。</li>\r\n    <li>将客户的申购和赎回进行确认，并将份额变化和资产总值变化应用到基金中。</li>\r\n    <li>重新计算基金的单位净值。</li>\r\n  </ul>\r\n  <p>交易确认过程可能耗时数秒，请耐心等候。</p>\r\n\r\n  <div class=\"flex-container\" style=\"margin: 20px 0\">\r\n    <p style=\"margin: auto 0\">确认结算日期：</p>\r\n    <a-input style=\"width: 100px\" v-model:value=\"date\"></a-input>\r\n  </div>\r\n\r\n  <a-space>\r\n    <a-button type=\"primary\" style=\"margin: 20px 0\" @click=\"confirm\">开始交易确认</a-button>\r\n    <a-button style=\"margin: 20px 0\" v-if=\"totalAmount!==null\" @click=\"$emit('next')\">下一步</a-button>\r\n  </a-space>\r\n\r\n  <a-divider/>\r\n\r\n  <h2 v-if=\"totalAmount!==null\">上一日成交额：{{ totalAmount }}</h2>\r\n\r\n  <div class=\"tb-container\" v-if=\"dataSource!==null\">\r\n    <a-table :columns=\"columns\" :data-source=\"dataSource\" rowKey=\"id\" bordered>\r\n      <template #bodyCell=\"{ text }\">\r\n        <div>\r\n          {{ text }}\r\n        </div>\r\n      </template>\r\n    </a-table>\r\n  </div>\r\n\r\n\r\n</template>\r\n\r\n<style scoped>\r\n.flex-container {\r\n  display: flex;\r\n}\r\n\r\nli {\r\n  margin: 10px 0;\r\n}\r\n</style>"],"mappings":";;gEAyDEA,mBAAA,CAAa,YAAT,MAAI;gEACRA,mBAAA,CAAyC,cAAnC,8BAA4B;gEAIlCA,mBAAA,CAAe,WAAZ,UAAQ;gEACXA,mBAAA,CAIK,a,aAHHA,mBAAA,CAA2B,YAAvB,oBAAkB,G,aACtBA,mBAAA,CAA2C,YAAvC,oCAAkC,G,aACtCA,mBAAA,CAAqB,YAAjB,cAAY,E;gEAElBA,mBAAA,CAA0B,WAAvB,qBAAmB;;EAEjBC,KAAK,EAAC,gBAAgB;EAACC,KAAsB,EAAtB;IAAA;EAAA;;gEAC1BF,mBAAA,CAAqC;EAAlCE,KAAsB,EAAtB;IAAA;EAAA;AAAsB,GAAC,SAAO;;;;;;EAa9BD,KAAK,EAAC;;;;;;;;6DA3BXE,UAAa,EACbC,UAAyC,EAEzCC,YAAA,CAAYC,oBAAA,GAEZC,UAAe,EACfC,UAIK,EACLC,UAA0B,EAE1BT,mBAAA,CAGM,OAHNU,UAGM,GAFJC,UAAqC,EACrCN,YAAA,CAA6DO,kBAAA;IAApDV,KAAoB,EAApB;MAAA;IAAA,CAAoB;IAASW,KAAK,EAAEC,IAAA,CAAAC,IAAI;0DAAJD,IAAA,CAAAC,IAAI,GAAAC,MAAA;wCAGnDX,YAAA,CAGUY,kBAAA;sBAFR,MAAkF,CAAlFZ,YAAA,CAAkFa,mBAAA;MAAxEC,IAAI,EAAC,SAAS;MAACjB,KAAsB,EAAtB;QAAA;MAAA,CAAsB;MAAEkB,OAAK,EAAEN,IAAA,CAAAO;;wBAAS,MAAM,C,iBAAN,QAAM,E;;oCAChCP,IAAA,CAAAQ,WAAW,a,cAAlDC,YAAA,CAAgGL,mBAAA;;MAAtFhB,KAAsB,EAAtB;QAAA;MAAA,CAAsB;MAA4BkB,OAAK,EAAAI,MAAA,QAAAA,MAAA,MAAAR,MAAA,IAAEF,IAAA,CAAAW,KAAK;;wBAAU,MAAG,C,iBAAH,KAAG,E;;;;MAGvFpB,YAAA,CAAYC,oBAAA,GAEFQ,IAAA,CAAAQ,WAAW,a,cAArBI,mBAAA,CAA2D,MAAAC,UAAA,EAA7B,SAAO,GAAAC,gBAAA,CAAGd,IAAA,CAAAQ,WAAW,oB,mCAEnBR,IAAA,CAAAe,UAAU,a,cAA1CH,mBAAA,CAQM,OARNI,UAQM,GAPJzB,YAAA,CAMU0B,kBAAA;IANAC,OAAO,EAAElB,IAAA,CAAAkB,OAAO;IAAG,aAAW,EAAElB,IAAA,CAAAe,UAAU;IAAEI,MAAM,EAAC,IAAI;IAACC,QAAQ,EAAR;;IACrDC,QAAQ,EAAAC,QAAA,CACjB,CAEM;MAHeC;IAAI,OACzBrC,mBAAA,CAEM,aAAA4B,gBAAA,CADDS,IAAI,iB"},"metadata":{},"sourceType":"module","externalDependencies":[]}