{"ast":null,"code":"import { ref } from \"vue\";\nimport axios from \"@/api/request\";\nexport default {\n  __name: 'Add-product',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const textarea = ref(\"\");\n    const fileInput = ref(null); // 定义文件输入的引用\n    const requestdata = ref({\n      titleName: \"\",\n      titleData: \"\",\n      description: \"\",\n      file: \"\"\n    });\n    function print() {\n      console.log(requestdata.value);\n    }\n    const handleFileChange = () => {\n      requestdata.value.file = Array.from(fileInput.value.files);\n      console.log(requestdata.value.file);\n    };\n    const sendToBackend = () => {\n      // 构建FormData对象\n      const formData = new FormData();\n      formData.append(\"titleName\", requestdata.value.titleName);\n      formData.append(\"titleData\", requestdata.value.titleData);\n      formData.append(\"description\", requestdata.value.description);\n\n      // 添加文件\n      requestdata.value.file.forEach((file, index) => {\n        formData.append(`file${index}`, file);\n      });\n\n      // 发送POST请求\n      axios.post(\"/title/add\", formData).then(response => {\n        console.log(\"success Response from backend:\", response.data);\n      }).catch(error => {\n        console.error(\"Error sending data to backend:\", error.message);\n      });\n    };\n    const __returned__ = {\n      textarea,\n      fileInput,\n      requestdata,\n      print,\n      handleFileChange,\n      sendToBackend,\n      ref,\n      get axios() {\n        return axios;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","axios","textarea","fileInput","requestdata","titleName","titleData","description","file","print","console","log","value","handleFileChange","Array","from","files","sendToBackend","formData","FormData","append","forEach","index","post","then","response","data","catch","error","message"],"sources":["H:/GitHub-Repository/hengsheng/hello-world/src/components/Add-product.vue"],"sourcesContent":["<template>\r\n  <el-input v-model=\"requestdata.titleName\" placeholder=\"请输入题目名称\" />\r\n  <el-input\r\n    v-model=\"requestdata.titleData\"\r\n    :autosize=\"{ minRows: 2, maxRows: 4 }\"\r\n    type=\"textarea\"\r\n    placeholder=\"请输入题目\"\r\n  />\r\n  <el-input\r\n    v-model=\"requestdata.description\"\r\n    :autosize=\"{ minRows: 2, maxRows: 4 }\"\r\n    type=\"textarea\"\r\n    placeholder=\"请输入题目额外的描述信息\"\r\n  />\r\n  <button @click=\"print\">cilck</button>\r\n\r\n  <input type=\"file\" ref=\"fileInput\" @change=\"handleFileChange\" multiple />\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from \"vue\";\r\nimport axios from \"@/api/request\";\r\n\r\nconst textarea = ref(\"\");\r\nconst fileInput = ref(null); // 定义文件输入的引用\r\nconst requestdata = ref({\r\n  titleName: \"\",\r\n  titleData: \"\",\r\n  description: \"\",\r\n  file: \"\",\r\n});\r\nfunction print() {\r\n  console.log(requestdata.value);\r\n}\r\n\r\nconst handleFileChange = () => {\r\n  requestdata.value.file = Array.from(fileInput.value.files);\r\n  console.log(requestdata.value.file);\r\n};\r\n\r\nconst sendToBackend = () => {\r\n  // 构建FormData对象\r\n  const formData = new FormData();\r\n  formData.append(\"titleName\", requestdata.value.titleName);\r\n  formData.append(\"titleData\", requestdata.value.titleData);\r\n  formData.append(\"description\", requestdata.value.description);\r\n\r\n  // 添加文件\r\n  requestdata.value.file.forEach((file, index) => {\r\n    formData.append(`file${index}`, file);\r\n  });\r\n\r\n  // 发送POST请求\r\n  axios\r\n    .post(\"/title/add\", formData)\r\n    .then((response) => {\r\n      console.log(\"success Response from backend:\", response.data);\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"Error sending data to backend:\", error.message);\r\n    });\r\n};\r\n</script>\r\n"],"mappings":"AAoBA,SAASA,GAAG,QAAQ,KAAK;AACzB,OAAOC,KAAK,MAAM,eAAe;;;;;;;IAEjC,MAAMC,QAAQ,GAAGF,GAAG,CAAC,EAAE,CAAC;IACxB,MAAMG,SAAS,GAAGH,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC;IAC7B,MAAMI,WAAW,GAAGJ,GAAG,CAAC;MACtBK,SAAS,EAAE,EAAE;MACbC,SAAS,EAAE,EAAE;MACbC,WAAW,EAAE,EAAE;MACfC,IAAI,EAAE;IACR,CAAC,CAAC;IACF,SAASC,KAAKA,CAAA,EAAG;MACfC,OAAO,CAACC,GAAG,CAACP,WAAW,CAACQ,KAAK,CAAC;IAChC;IAEA,MAAMC,gBAAgB,GAAGA,CAAA,KAAM;MAC7BT,WAAW,CAACQ,KAAK,CAACJ,IAAI,GAAGM,KAAK,CAACC,IAAI,CAACZ,SAAS,CAACS,KAAK,CAACI,KAAK,CAAC;MAC1DN,OAAO,CAACC,GAAG,CAACP,WAAW,CAACQ,KAAK,CAACJ,IAAI,CAAC;IACrC,CAAC;IAED,MAAMS,aAAa,GAAGA,CAAA,KAAM;MAC1B;MACA,MAAMC,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;MAC/BD,QAAQ,CAACE,MAAM,CAAC,WAAW,EAAEhB,WAAW,CAACQ,KAAK,CAACP,SAAS,CAAC;MACzDa,QAAQ,CAACE,MAAM,CAAC,WAAW,EAAEhB,WAAW,CAACQ,KAAK,CAACN,SAAS,CAAC;MACzDY,QAAQ,CAACE,MAAM,CAAC,aAAa,EAAEhB,WAAW,CAACQ,KAAK,CAACL,WAAW,CAAC;;MAE7D;MACAH,WAAW,CAACQ,KAAK,CAACJ,IAAI,CAACa,OAAO,CAAC,CAACb,IAAI,EAAEc,KAAK,KAAK;QAC9CJ,QAAQ,CAACE,MAAM,CAAE,OAAME,KAAM,EAAC,EAAEd,IAAI,CAAC;MACvC,CAAC,CAAC;;MAEF;MACAP,KAAK,CACFsB,IAAI,CAAC,YAAY,EAAEL,QAAQ,CAAC,CAC5BM,IAAI,CAAEC,QAAQ,IAAK;QAClBf,OAAO,CAACC,GAAG,CAAC,gCAAgC,EAAEc,QAAQ,CAACC,IAAI,CAAC;MAC9D,CAAC,CAAC,CACDC,KAAK,CAAEC,KAAK,IAAK;QAChBlB,OAAO,CAACkB,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAACC,OAAO,CAAC;MAChE,CAAC,CAAC;IACN,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}