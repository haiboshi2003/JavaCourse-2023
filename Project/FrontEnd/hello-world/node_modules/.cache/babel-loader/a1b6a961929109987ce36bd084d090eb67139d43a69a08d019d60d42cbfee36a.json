{"ast":null,"code":"import { defineComponent, h } from 'vue';\nimport axios from \"@/api/request\";\nimport { message, Modal } from \"ant-design-vue\";\nexport default defineComponent({\n  name: \"RiskLevel\",\n  emits: [\"finish\"],\n  data() {\n    return {\n      questionnaire: {\n        foreword: \"请稍等，正在加载中\",\n        questions: [{\n          options: [\"请稍等\"],\n          problem: \"请稍等\"\n        }]\n      },\n      choose: [],\n      result: 0\n    };\n  },\n  methods: {\n    submit() {\n      axios.post(\"http://118.25.19.55:9901/customer/risk-level\", {\n        choices: this.choose\n      }).then(r => {\n        console.log(r);\n        if (r.data.success) {\n          message.success(r.data.message);\n          this.result = r.data.result;\n          this.$emit(\"finish\", this.result);\n          try {\n            Modal.success({\n              title: '评测完成',\n              content: h('div', {}, [h('p', h('strong', `您的风险等级为：${r.data.textResult}`))]),\n              centered: true\n            });\n          } catch (e) {\n            console.log(e);\n          }\n        } else {\n          message.error(r.data.message);\n        }\n      }).catch(() => {\n        message.error(\"系统错误，请稍后再试\");\n      });\n    }\n  },\n  mounted() {\n    axios.get(\"http://118.25.19.55:9901/customer/risk-questionnaire\").then(r => {\n      console.log(r);\n      this.questionnaire = r.data;\n      this.choose = new Array(r.data.questions.length).fill(0);\n    }).catch(() => {\n      message.error(\"系统错误，请稍后再试\");\n    });\n  }\n});","map":{"version":3,"names":["defineComponent","h","axios","message","Modal","name","emits","data","questionnaire","foreword","questions","options","problem","choose","result","methods","submit","post","choices","then","r","console","log","success","$emit","title","content","textResult","centered","e","error","catch","mounted","get","Array","length","fill"],"sources":["H:\\GitHub-Repository\\hengsheng\\hello-world\\src\\components\\User\\RiskLevel.vue"],"sourcesContent":["<script>\r\nimport {defineComponent, h} from 'vue'\r\nimport axios from \"@/api/request\";\r\nimport {message, Modal} from \"ant-design-vue\";\r\n\r\nexport default defineComponent({\r\n  name: \"RiskLevel\",\r\n  emits: [\"finish\"],\r\n  data() {\r\n    return {\r\n      questionnaire: {\r\n        foreword: \"请稍等，正在加载中\",\r\n        questions: [\r\n          {\r\n            options: [\r\n              \"请稍等\"\r\n            ],\r\n            problem: \"请稍等\"\r\n          }\r\n        ]\r\n      },\r\n      choose: [],\r\n      result: 0\r\n    }\r\n  },\r\n  methods: {\r\n    submit() {\r\n      axios.post(\"http://118.25.19.55:9901/customer/risk-level\", {\r\n        choices: this.choose\r\n      }).then(r => {\r\n        console.log(r)\r\n        if (r.data.success) {\r\n          message.success(r.data.message);\r\n          this.result = r.data.result;\r\n          this.$emit(\"finish\",this.result);\r\n          try {\r\n            Modal.success({\r\n              title: '评测完成',\r\n              content: h('div', {}, [\r\n                h('p', h('strong', `您的风险等级为：${r.data.textResult}`)),\r\n              ]),\r\n              centered: true\r\n            });\r\n          } catch (e) {\r\n            console.log(e)\r\n          }\r\n        } else {\r\n          message.error(r.data.message);\r\n        }\r\n      }).catch(() => {\r\n        message.error(\"系统错误，请稍后再试\")\r\n      })\r\n    }\r\n  },\r\n  mounted() {\r\n    axios.get(\"http://118.25.19.55:9901/customer/risk-questionnaire\").then(r => {\r\n      console.log(r)\r\n      this.questionnaire = r.data;\r\n      this.choose = new Array(r.data.questions.length).fill(0)\r\n    }).catch(() => {\r\n      message.error(\"系统错误，请稍后再试\")\r\n    })\r\n  }\r\n})\r\n</script>\r\n<template>\r\n  <a-row>\r\n    <a-col :span=\"2\"/>\r\n    <a-col :span=\"20\">\r\n      <div class=\"q\">\r\n        <a-typography>\r\n          <a-typography-title>同济基金销售公司风险评估问卷</a-typography-title>\r\n          <a-typography-paragraph>\r\n            <a-typography-text>\r\n              {{ questionnaire.foreword }}\r\n            </a-typography-text>\r\n          </a-typography-paragraph>\r\n          <div style=\"margin: 40px 0\" v-for=\"(a,i) in questionnaire.questions\" :key=\"i\">\r\n            <a-row>\r\n              <div style=\"font-size: 2em; font-weight: bold; margin-right: 20px\">{{ i + 1 }}</div>\r\n              <div style=\"margin-top: 8px\">\r\n                <a-typography-paragraph>\r\n                  <a-typography-text style=\"font-size: 1.3em\">{{ a.problem }}</a-typography-text>\r\n                </a-typography-paragraph>\r\n                <a-typography-paragraph>\r\n                  <a-radio-group v-model:value=\"choose[i]\">\r\n                    <a-radio style=\"display: flex;margin: 16px 0\" v-for=\"(o,ii) in a.options\" :key=\"ii\" :value=\"ii\">\r\n                      {{ o }}\r\n                    </a-radio>\r\n                  </a-radio-group>\r\n                </a-typography-paragraph>\r\n              </div>\r\n            </a-row>\r\n          </div>\r\n        </a-typography>\r\n        <div>\r\n          <a-button type=\"primary\" @click=\"submit\">提交测评</a-button>\r\n        </div>\r\n      </div>\r\n    </a-col>\r\n    <a-col :span=\"2\"/>\r\n  </a-row>\r\n</template>\r\n\r\n<style scoped>\r\n.q {\r\n  margin-top: 20px;\r\n  padding: 40px 60px;\r\n  border: solid rgba(0, 0, 0, 0.1) 1px;\r\n  background: white;\r\n  border-radius: 32px;\r\n  box-shadow: 1px 4px 6px 2px rgba(0, 0, 0, 0.2);\r\n}\r\n</style>"],"mappings":"AACA,SAAQA,eAAe,EAAEC,CAAC,QAAO,KAAI;AACrC,OAAOC,KAAI,MAAO,eAAe;AACjC,SAAQC,OAAO,EAAEC,KAAK,QAAO,gBAAgB;AAE7C,eAAeJ,eAAe,CAAC;EAC7BK,IAAI,EAAE,WAAW;EACjBC,KAAK,EAAE,CAAC,QAAQ,CAAC;EACjBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,aAAa,EAAE;QACbC,QAAQ,EAAE,WAAW;QACrBC,SAAS,EAAE,CACT;UACEC,OAAO,EAAE,CACP,KAAI,CACL;UACDC,OAAO,EAAE;QACX;MAEJ,CAAC;MACDC,MAAM,EAAE,EAAE;MACVC,MAAM,EAAE;IACV;EACF,CAAC;EACDC,OAAO,EAAE;IACPC,MAAMA,CAAA,EAAG;MACPd,KAAK,CAACe,IAAI,CAAC,8CAA8C,EAAE;QACzDC,OAAO,EAAE,IAAI,CAACL;MAChB,CAAC,CAAC,CAACM,IAAI,CAACC,CAAA,IAAK;QACXC,OAAO,CAACC,GAAG,CAACF,CAAC;QACb,IAAIA,CAAC,CAACb,IAAI,CAACgB,OAAO,EAAE;UAClBpB,OAAO,CAACoB,OAAO,CAACH,CAAC,CAACb,IAAI,CAACJ,OAAO,CAAC;UAC/B,IAAI,CAACW,MAAK,GAAIM,CAAC,CAACb,IAAI,CAACO,MAAM;UAC3B,IAAI,CAACU,KAAK,CAAC,QAAQ,EAAC,IAAI,CAACV,MAAM,CAAC;UAChC,IAAI;YACFV,KAAK,CAACmB,OAAO,CAAC;cACZE,KAAK,EAAE,MAAM;cACbC,OAAO,EAAEzB,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,EAAE,CACpBA,CAAC,CAAC,GAAG,EAAEA,CAAC,CAAC,QAAQ,EAAG,WAAUmB,CAAC,CAACb,IAAI,CAACoB,UAAW,EAAC,CAAC,CAAC,CACpD,CAAC;cACFC,QAAQ,EAAE;YACZ,CAAC,CAAC;UACJ,EAAE,OAAOC,CAAC,EAAE;YACVR,OAAO,CAACC,GAAG,CAACO,CAAC;UACf;QACF,OAAO;UACL1B,OAAO,CAAC2B,KAAK,CAACV,CAAC,CAACb,IAAI,CAACJ,OAAO,CAAC;QAC/B;MACF,CAAC,CAAC,CAAC4B,KAAK,CAAC,MAAM;QACb5B,OAAO,CAAC2B,KAAK,CAAC,YAAY;MAC5B,CAAC;IACH;EACF,CAAC;EACDE,OAAOA,CAAA,EAAG;IACR9B,KAAK,CAAC+B,GAAG,CAAC,sDAAsD,CAAC,CAACd,IAAI,CAACC,CAAA,IAAK;MAC1EC,OAAO,CAACC,GAAG,CAACF,CAAC;MACb,IAAI,CAACZ,aAAY,GAAIY,CAAC,CAACb,IAAI;MAC3B,IAAI,CAACM,MAAK,GAAI,IAAIqB,KAAK,CAACd,CAAC,CAACb,IAAI,CAACG,SAAS,CAACyB,MAAM,CAAC,CAACC,IAAI,CAAC,CAAC;IACzD,CAAC,CAAC,CAACL,KAAK,CAAC,MAAM;MACb5B,OAAO,CAAC2B,KAAK,CAAC,YAAY;IAC5B,CAAC;EACH;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}